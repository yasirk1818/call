<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ConnectMe Chat</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Agora Web SDK -->
    <script src="https://download.agora.io/sdk/release/AgoraRTC_N.js"></script>
</head>
<body>
    <div class="app-container">
        <!-- Sidebar (Friends List, Search, etc.) -->
        <div class="sidebar">
            <!-- ... (Sidebar ka tamam HTML pichle version jaisa hi hai) ... -->
        </div>

        <!-- Main Chat Area -->
        <div class="chat-area hidden">
            <!-- ... (Chat Area ka tamam HTML pichle version jaisa hi hai) ... -->
            <div class="chat-header">
                <div class="friend-details">
                    <img id="chat-friend-avatar" src="https://via.placeholder.com/40" alt="avatar">
                    <p id="chat-friend-name" class="friend-name">Select a chat to start</p>
                </div>
                <div class="chat-icons">
                    <i id="video-call-btn" class="fas fa-video" title="Video Call"></i>
                    <i id="voice-call-btn" class="fas fa-phone" title="Voice Call"></i>
                </div>
            </div>
            <div class="messages-area" id="messages-area"></div>
            <form class="message-input-area" id="message-form"></form>
        </div>
    </div>

    <!-- Call Modal (Initially hidden) -->
    <div id="call-modal" class="modal-container hidden">
        <div class="modal-content">
            <h3>Video Call</h3>
            <p>with <b id="call-partner-name"></b></p>
            <div class="video-grid">
                <!-- Remote video will be shown here -->
                <div id="remote-video" class="video-view"></div>
                <!-- Local video preview -->
                <div id="local-video" class="video-view-local"></div>
            </div>
            <button id="end-call-btn" class="btn-danger">End Call</button>
        </div>
    </div>

    <!-- Client-side libraries and scripts -->
    <script src="/socket.io/socket.io.js"></script>
    <script src="/js/chat.js"></script> 
    <script src="/js/agora-client.js"></script> <!-- Agora client logic file -->
</body>
</html>
